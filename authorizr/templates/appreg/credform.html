{% extends "base.html" %}

{% block title %}Edit Credentials {% endblock %}


{% block scripts %}		
		<script src="{{ STATIC_URL }}js/prefills.js"></script> 
{% endblock %}


{% block content %}

<h1>{{ title }}</h1>


{% if appuid %}

<div id="modal-from-dom" class="modal hide fade">
    <div class="modal-header">
      <a href="#" class="close discard">&times;</a>
      <h3>Delete Application</h3>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete this application?</p>      
    </div>
    <div class="modal-footer">
      <a href="/appreg/deleteapp/{{ appuid }}/" class="btn danger">Yes</a>
      <a href="#" class="btn secondary discard">No</a>
    </div>
</div>


{% endif %}



<div class="container">
	
<div class="row">
	<div class="span1">
		<div id="prefiller" class="btn-group">
		    <button class="btn">Prefill fields</button>
		    <button class="btn dropdown-toggle" data-toggle="dropdown">
		    	<span class="caret"></span>
		    </button>
		    <ul class="dropdown-menu" id="dropdownLinks">        
		   	</ul>
		</div>
	</div>
</div>


<div class="btn-group" data-toggle="buttons-radio">
  <button class="btn active" id="protoOa2">OAuth2</button>
  <button class="btn" id="protoOa1">OAuth</button>
</div>

<!--<div id="protocolToggle" class="btn-group"> 
  <a class="btn dropdown-toggle" data-toggle="dropdown" href="#" id="protoBtn">
    Protocol
    <span class="caret"></span>
  </a>

  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel" id="protoDd">
    <li class="active"><a href="#oauth2">OAuth2</a></li>
  <li><a href="#oauth1">OAuth1</a></li>  
  </ul>
</div>-->


  <div class="cred_form_row" id="oa2">
     <form method='post' action='.'>
      {% csrf_token %} 
      <table class="table table-bordered table-condensed table-striped">
                  
              {% for field in formOauth2.visible_fields %}
                  <tr>
                <td>
                {{ field.label_tag }}                   
                </td>         
                <td>        
                      {{ field }}
                      <br>
                      {{ field.errors }}
                </td>     
                  </tr>
              {% endfor %}  
            </table>


           
           <input type='submit' name='oa2' value="{{ btn_text }}">
           <a id="btn-delete-app" href="#" class="btn btn-danger confirm-delete">Remove this application</a>
      </form>
  </div>
    <div class="cred_form_row" id="oa1" style="display: none">
    <form method='post' action='.'>
      {% csrf_token %} 
      <table class="table table-bordered table-condensed table-striped">
                  
              {% for field in formOauth1.visible_fields %}
                  <tr>
                <td>
                {{ field.label_tag }}                   
                </td>         
                <td>        
                      {{ field }}
                      <br>
                      {{ field.errors }}
                </td>     
                  </tr>
              {% endfor %}  
            </table>
           
           <input type='submit' name='oa1' value="{{ btn_text }}">
           <a id="btn-delete-app" href="#" class="btn btn-danger confirm-delete">Remove this application</a>
      </form>
  </div>
</div>


<script type="application/javascript">



/*$("#protoDd a").click(function(event) {
    
      //event.preventDefault();
      key = $(this).attr('href').substring(1); 
      
      if(key=='oauth1') {
        $('#oa1').show();
        $('#oa2').hide();
      }
      else
      {
        $('#oa2').show();
        $('#oa1').hide(); 
      }
    })*/

/*$('.btn').on("click", function(){
    var value = $(this).text();
    if(value == "OAuth") {            
       $('#oa1').show();
       $('#oa2').hide();  
       }   
    else {
      $('#oa2').show();
      $('#oa1').hide();
    }

});*/
$('#protoOa1').click(function(e) 
{
 $('#oa1').show();
 $('#oa2').hide();  
}); 

$('#protoOa2').click(function(e) 
{
 $('#oa2').show();
 $('#oa1').hide();
}); 

$('.confirm-delete').click(function(e) {
	e.preventDefault();
	$('#modal-from-dom').modal('show');
});	
$('.discard').click(function(e) {
	e.preventDefault();
	$('#modal-from-dom').modal('hide');
});	

</script>



{% endblock %}