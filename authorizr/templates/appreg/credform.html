{% extends "base.html" %}

{% block title %}Edit Credentials {% endblock %}


{% block scripts %}		
		<script src="{{ STATIC_URL }}js/prefills.js"></script> 
{% endblock %}


{% block content %}

<h1>{{ title }}</h1>


{% if appuid %}

<div id="modal-from-dom" class="modal hide fade">
    <div class="modal-header">
      <a href="#" class="close discard">&times;</a>
      <h3>Delete Application</h3>
    </div>
    <div class="modal-body">
      <p>Are you sure you want to delete this application?</p>      
    </div>
    <div class="modal-footer">
      <a href="/appreg/deleteapp/{{ appuid }}/" class="btn danger">Yes</a>
      <a href="#" class="btn secondary discard">No</a>
    </div>
</div>


{% endif %}

<div class="container">
	
<div class="row">
	<div class="span1">
		<div id="prefiller" class="btn-group">
		    <button class="btn">Prefill fields</button>
		    <button class="btn dropdown-toggle" data-toggle="dropdown">
		    	<span class="caret"></span>
		    </button>
		    <ul class="dropdown-menu" id="dropdownLinks">        
		   	</ul>
		</div>
	</div>
</div>

<div class="cred_form_row">      
    	<div class="span9">      
			<form method='post' action='.'>
			 {% csrf_token %} 
			 							
					    {% for hidden in form.hidden_fields %}
					    {{ hidden }}
					    {% endfor %}
						<table class="table table-bordered table-condensed table-striped">
									
					    {% for field in form.visible_fields %}
					        <tr>
								<td>
								{{ field.label_tag }}            				
								</td>        	
								<td>				
					            {{ field }}
					            <br>
					            {{ field.errors }}
								</td>			
					        </tr>
					    {% endfor %}  
						</table>
					  
			
			     <!-- submit button -->
			     <input type='submit' value="{{ btn_text }}">
			     <a id="btn-delete-app" href="#" class="btn btn-danger confirm-delete">Remove this application</a>
			</form>
		</div>    
	</div>
</div>

<script type="application/javascript">

$(function() {
  $('#id_protocol').change();
});

$('#id_protocol').change(function() {
	 
    if($(this).val() == "oauth1"){    	
    	$(".oauth2").parents("tr").hide();	    	    
    	$(".oauth1").parents("tr").show();    	  
    }else{    	
    	$(".oauth1").parents("tr").hide();
    	$(".oauth2").parents("tr").show();  
    }
    
});


$('.confirm-delete').click(function(e) {
	e.preventDefault();
	$('#modal-from-dom').modal('show');
});	
$('.discard').click(function(e) {
	e.preventDefault();
	$('#modal-from-dom').modal('hide');
});	

</script>



{% endblock %}